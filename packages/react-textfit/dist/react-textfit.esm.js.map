{"version":3,"file":"react-textfit.esm.js","sources":["../src/utils/innerSize.ts","../src/utils/series.ts","../src/utils/shallowEqual.ts","../src/utils/throttle.ts","../src/utils/uniqueId.ts","../src/utils/whilst.ts","../src/Textfit.tsx"],"sourcesContent":["// Calculate height without padding.\nexport function innerHeight(el: any) {\n  const style = window.getComputedStyle(el, null);\n  // Hidden iframe in Firefox returns null, https://github.com/malte-wessel/react-textfit/pull/34\n  if (!style) return el.clientHeight;\n  return (\n    el.clientHeight -\n    parseInt(style.getPropertyValue('padding-top'), 10) -\n    parseInt(style.getPropertyValue('padding-bottom'), 10)\n  );\n}\n\n// Calculate width without padding.\nexport function innerWidth(el: any) {\n  const style = window.getComputedStyle(el, null);\n  // Hidden iframe in Firefox returns null, https://github.com/malte-wessel/react-textfit/pull/34\n  if (!style) return el.clientWidth;\n  return (\n    el.clientWidth -\n    parseInt(style.getPropertyValue('padding-left'), 10) -\n    parseInt(style.getPropertyValue('padding-right'), 10)\n  );\n}\n","/**\n * Run the functions in the tasks array in series, each one running once the previous function has completed.\n * If any functions in the series pass an error to its callback, no more functions are run,\n * and callback is immediately called with the value of the error. Otherwise, callback receives an array of results\n * when tasks have completed.\n * Taken from https://github.com/feross/run-series\n *\n * @params {Array} tasks An array containing functions to run, each function is passed a callback(err, result) which it must call on completion with an error err (which can be null) and an optional result value.\n * @params {Function} callback(err, results) - An optional callback to run once all the functions have completed. This function gets a results array containing all the result arguments passed to the task callbacks.\n */\n\nimport process from 'process';\n\nexport default function series(tasks: any, cb: any) {\n  const results: any = [];\n  let current = 0;\n  let isSync = true;\n\n  function done(err: any) {\n    function end() {\n      if (cb) cb(err, results);\n    }\n    if (isSync) process.nextTick(end);\n    else end();\n  }\n\n  function each(err: any, result: any) {\n    results.push(result);\n    if (++current >= tasks.length || err) done(err);\n    else tasks[current](each);\n  }\n\n  if (tasks.length > 0) tasks[0](each);\n  else done(null);\n\n  isSync = false;\n}\n","export default function shallowEqual(objA: any, objB: any) {\n  if (objA === objB) {\n    return true;\n  }\n\n  const keysA = Object.keys(objA);\n  const keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // Test for A's keys different from B.\n  const hasOwn = Object.prototype.hasOwnProperty;\n  for (let i = 0; i < keysA.length; i++) {\n    if (!hasOwn.call(objB, keysA[i]) || objA[keysA[i]] !== objB[keysA[i]]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","/**\n * Returns a new function that, when invoked, invokes `func` at most once per `wait` milliseconds.\n * Taken from https://github.com/component/throttle v1.0.0\n *\n * @param {Function} func Function to wrap.\n * @param {Number} wait Number of milliseconds that must elapse between `func` invocations.\n * @return {Function} A new function that wraps the `func` function passed in.\n */\n\nexport default function throttle(func: any, wait: any) {\n  let ctx: any;\n  let args: any;\n  let rtn: any;\n  let timeoutID: any;\n  let last = 0;\n\n  function call() {\n    timeoutID = 0;\n    last = +new Date().getMilliseconds();\n    rtn = func.apply(ctx, args);\n    ctx = null;\n    args = null;\n  }\n\n  return function throttled(context: any) {\n    ctx = context;\n    // eslint-disable-next-line\n    args = arguments;\n    const delta = new Date().getMilliseconds() - last;\n    if (!timeoutID) {\n      if (delta >= wait) call();\n      else timeoutID = setTimeout(call, wait - delta);\n    }\n    return rtn;\n  };\n}\n","let uid = 0;\n\nexport default function uniqueId() {\n  return uid++;\n}\n","const noop = () => {};\n\n/**\n * Repeatedly call fn, while test returns true. Calls callback when stopped, or an error occurs.\n *\n * @param {Function} test Synchronous truth test to perform before each execution of fn.\n * @param {Function} fn A function which is called each time test passes. The function is passed a callback(err), which must be called once it has completed with an optional err argument.\n * @param {Function} callback A callback which is called after the test fails and repeated execution of fn has stopped.\n */\n\nexport default function whilst(test: any, iterator: any, callback = noop) {\n  if (test()) {\n    iterator(function next(this: any, err: any, ...args: any[]) {\n      if (err) {\n        // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 1.\n        callback(err);\n      } else if (test.apply(this, args)) {\n        iterator(next);\n      } else {\n        // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 1.\n        callback(null);\n      }\n    });\n  } else {\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 1.\n    callback(null);\n  }\n}\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { innerWidth, innerHeight } from './utils/innerSize';\nimport series from './utils/series';\nimport shallowEqual from './utils/shallowEqual';\nimport throttle from './utils/throttle';\nimport uniqueId from './utils/uniqueId';\nimport whilst from './utils/whilst';\n\nfunction assertElementFitsWidth(el: any, width: any) {\n  // -1: temporary bugfix, will be refactored soon\n  return el.scrollWidth - 1 <= width;\n}\n\nfunction assertElementFitsHeight(el: any, height: any) {\n  // -1: temporary bugfix, will be refactored soon\n  return el.scrollHeight - 1 <= height;\n}\n\nfunction noop() {}\n\nexport default class TextFit extends React.Component {\n  static propTypes = {\n    children: PropTypes.node,\n    text: PropTypes.string,\n    min: PropTypes.number,\n    max: PropTypes.number,\n    mode: PropTypes.oneOf(['single', 'multi']),\n    forceSingleModeWidth: PropTypes.bool,\n    throttle: PropTypes.number,\n    onReady: PropTypes.func,\n    autoResize: PropTypes.bool,\n    style: PropTypes.object,\n    forceWidth: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    min: 1,\n    max: 100,\n    mode: 'multi',\n    forceSingleModeWidth: true,\n    throttle: 50,\n    autoResize: true,\n    onReady: noop,\n  };\n\n  _child: any;\n  _parent: any;\n  pid: any;\n\n  constructor(props: any) {\n    super(props);\n    if ('perfectFit' in props) {\n      console.warn('TextFit property perfectFit has been removed.');\n    }\n\n    this.handleWindowResize = throttle(this.handleWindowResize, props.throttle);\n  }\n\n  state = {\n    fontSize: null,\n    ready: false,\n  };\n\n  componentDidMount() {\n    const { autoResize }: Readonly<{ autoResize?: boolean }> = this.props;\n    if (autoResize) {\n      window.addEventListener('resize', this.handleWindowResize);\n    }\n    this.process();\n  }\n\n  componentDidUpdate(prevProps: any) {\n    const { ready } = this.state;\n    if (!ready) return;\n    if (shallowEqual(this.props, prevProps)) return;\n    this.process();\n  }\n\n  componentWillUnmount() {\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'autoResize' does not exist on type 'Read... Remove this comment to see the full error message\n    const { autoResize } = this.props;\n    if (autoResize) {\n      window.removeEventListener('resize', this.handleWindowResize);\n    }\n    // Setting a new pid will cancel all running processes\n    this.pid = uniqueId();\n  }\n\n  handleWindowResize: (context: any) => any = () => {\n    this.process();\n  };\n\n  process() {\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'min' does not exist on type 'Readonly<{}... Remove this comment to see the full error message\n    const { min, max, mode, forceSingleModeWidth, onReady } = this.props;\n    const el = this._parent;\n    const wrapper = this._child;\n\n    const originalWidth = innerWidth(el);\n    const originalHeight = innerHeight(el);\n\n    if (originalHeight <= 0 || isNaN(originalHeight)) {\n      console.warn(\n        'Can not process element without height. Make sure the element is displayed and has a static height.'\n      );\n      return;\n    }\n\n    if (originalWidth <= 0 || isNaN(originalWidth)) {\n      console.warn(\n        'Can not process element without width. Make sure the element is displayed and has a static width.'\n      );\n      return;\n    }\n\n    const pid = uniqueId();\n    this.pid = pid;\n\n    const shouldCancelProcess = () => pid !== this.pid;\n\n    const testPrimary =\n      mode === 'multi'\n        ? () => assertElementFitsHeight(wrapper, originalHeight)\n        : () => assertElementFitsWidth(wrapper, originalWidth);\n\n    const testSecondary =\n      mode === 'multi'\n        ? () => assertElementFitsWidth(wrapper, originalWidth)\n        : () => assertElementFitsHeight(wrapper, originalHeight);\n\n    let mid: any;\n    let low = min;\n    let high = max;\n\n    this.setState({ ready: false });\n\n    series(\n      [\n        // Step 1:\n        // Binary search to fit the element's height (multi line) / width (single line)\n        (stepCallback: any) =>\n          whilst(\n            () => low <= high,\n            (whilstCallback: any) => {\n              if (shouldCancelProcess()) return whilstCallback(true);\n              // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'number' is not assignable to par... Remove this comment to see the full error message\n              mid = parseInt((low + high) / 2, 10);\n              this.setState({ fontSize: mid }, () => {\n                if (shouldCancelProcess()) return whilstCallback(true);\n                if (testPrimary()) low = mid + 1;\n                else high = mid - 1;\n                return whilstCallback();\n              });\n            },\n            stepCallback\n          ),\n        // Step 2:\n        // Binary search to fit the element's width (multi line) / height (single line)\n        // If mode is single and forceSingleModeWidth is true, skip this step\n        // in order to not fit the elements height and decrease the width\n        (stepCallback: any) => {\n          if (mode === 'single' && forceSingleModeWidth) return stepCallback();\n          if (testSecondary()) return stepCallback();\n          low = min;\n          high = mid;\n          return whilst(\n            () => low < high,\n            (whilstCallback: any) => {\n              if (shouldCancelProcess()) return whilstCallback(true);\n              // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'number' is not assignable to par... Remove this comment to see the full error message\n              mid = parseInt((low + high) / 2, 10);\n              this.setState({ fontSize: mid }, () => {\n                if (pid !== this.pid) return whilstCallback(true);\n                if (testSecondary()) low = mid + 1;\n                else high = mid - 1;\n                return whilstCallback();\n              });\n            },\n            stepCallback\n          );\n        },\n        // Step 3\n        // Limits\n        (stepCallback: any) => {\n          // We break the previous loop without updating mid for the final time,\n          // so we do it here:\n          mid = Math.min(low, high);\n\n          // Ensure we hit the user-supplied limits\n          mid = Math.max(mid, min);\n          mid = Math.min(mid, max);\n\n          // Sanity check:\n          mid = Math.max(mid, 0);\n\n          if (shouldCancelProcess()) return stepCallback(true);\n          this.setState({ fontSize: mid }, stepCallback);\n        },\n      ],\n      (err: any) => {\n        // err will be true, if another process was triggered\n        if (err || shouldCancelProcess()) return;\n        this.setState({ ready: true }, () => onReady(mid));\n      }\n    );\n  }\n\n  render() {\n    const {\n      children,\n      text,\n      style,\n      min,\n      max,\n      mode,\n      forceWidth,\n      forceSingleModeWidth,\n      throttle,\n      autoResize,\n      onReady,\n      ...props\n    }: any = this.props;\n    const { fontSize, ready } = this.state;\n    const finalStyle = {\n      ...style,\n      fontSize: fontSize,\n    };\n\n    const wrapperStyle = {\n      display: ready ? 'block' : 'inline-block',\n    };\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'whiteSpace' does not exist on type '{ di... Remove this comment to see the full error message\n    if (mode === 'single') wrapperStyle.whiteSpace = 'nowrap';\n\n    return (\n      <div ref={c => (this._parent = c)} style={finalStyle} {...props}>\n        <div ref={c => (this._child = c)} style={wrapperStyle}>\n          {text && typeof children === 'function'\n            ? ready\n              ? children(text)\n              : text\n            : children}\n        </div>\n      </div>\n    );\n  }\n}\n"],"names":["innerHeight","el","style","window","getComputedStyle","clientHeight","parseInt","getPropertyValue","innerWidth","clientWidth","series","tasks","cb","results","current","isSync","done","err","end","process","nextTick","each","result","push","length","shallowEqual","objA","objB","keysA","Object","keys","keysB","hasOwn","prototype","hasOwnProperty","i","call","throttle","func","wait","ctx","args","rtn","timeoutID","last","Date","getMilliseconds","apply","throttled","context","arguments","delta","setTimeout","uid","uniqueId","noop","whilst","test","iterator","callback","next","assertElementFitsWidth","width","scrollWidth","assertElementFitsHeight","height","scrollHeight","TextFit","props","_child","_parent","pid","state","fontSize","ready","handleWindowResize","console","warn","componentDidMount","autoResize","addEventListener","componentDidUpdate","prevProps","componentWillUnmount","removeEventListener","min","max","mode","forceSingleModeWidth","onReady","wrapper","originalWidth","originalHeight","isNaN","shouldCancelProcess","testPrimary","testSecondary","mid","low","high","setState","stepCallback","whilstCallback","Math","render","children","text","finalStyle","wrapperStyle","display","whiteSpace","React","ref","c","createElement","Component","propTypes","PropTypes","node","string","number","oneOf","bool","object","forceWidth","defaultProps"],"mappings":"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"}